module martian;

alias MartianChar = ushort;

MartianChar capitalizedSymbol2martian(in wchar c) pure
{
    MartianChar ret;

    if(c == 0x0020) // space;
    {
    }
    else if(c >= 0x0030 && c <= 0x0039)
        ret = numbers[c - 0x0030];
    else if(c >= 0x0041 && c <= 0x005a)
        ret = latin[c - 0x0041];
    else if(c >= 0x0410 && c <= 0x422f)
        ret = cyrillic[c - 0x0410];
    else if(c == 0x0401) // Cyrillic "Ё" spicial case
        ret = cyrillic[5]; // "Е"
    else
        ret = 0b01111111_00101010; // unknown symbol marking (cross in square)

    return ret;
}

/*
     ---a0---- ----b0---
    |\        |        /|
    | \       |       / |
    |  \      g0     /  |
    |   g1    |    a1   |
    f0   \    |    /    c0
    |     \   |   /     |
    |      ---|---      |
    |(f1)     |     (b1)|
    |      ---|---      |
    |     /   |   \     |
    |    /    |    \    |
    |   e1    |     c1  |
    |  /      d1     \  |
    | /       |       \ |
    |/        |        \|
     ---e0---- ----d0---
(p1)                     (p0)

p1 purpose depens on its position: it used as a clock delimiter, minus,
plus sections or as first left "period" dot
*/

immutable MartianChar[26] latin = [
//      cat0     cat1
//    pabcdefg pabcdefg
//    |||||||| ||||||||
    0b01110010_01110111, /// A
    0b01101110_01010111, /// B
    0b01101110_00000000, /// C
    0b01111101_00001000, /// D
    0b01101110_00000111, /// E
    0b01100010_00000111, /// F
    0b01101110_00010000, /// G
    0b00000000_01110111, /// H
    0b01101101_00001000, /// I
    0b00011000_00001000, /// J
    0b00000010_01010111, /// K
    0b00001110_00000000, /// L
//      cat0     cat1
//    pabcdefg pabcdefg
//    |||||||| ||||||||
    0b00010010_01000001, /// M
    0b00010010_00010001, /// N
    0b01111110_00000000, /// O
    0b01100000_01000111, /// P
    0b01111110_00010000, /// Q
    0b01100010_01010111, /// R
    0b01101100_00010001, /// S
    0b01100001_00001000, /// T
    0b00011110_00000000, /// U
    0b00000110_01001000, /// V
    0b00010010_00010100, /// W
    0b00000000_01010101, /// X
    0b00000000_01001001, /// Y
    0b01101100_01000100, /// Z
];

immutable MartianChar[32] cyrillic = [
//      cat0     cat1
//    pabcdefg pabcdefg
//    |||||||| ||||||||
    0b01110010_01110111, /// А
    0b01101110_00010111, /// Б
    0b01101110_01010111, /// В
    0b01100010_00000000, /// Г
    0b10111101_10000100, /// Д
    0b01101110_00000111, /// Е
    //~ 0b01101110_00000111, /// Ё (displayed same as Е) FIXME: outside of main UTF array
    0b00000001_01011101, /// Ж
    0b01101100_01010000, /// З
    0b00010010_01000100, /// И
    0b01010010_01000100, /// Й
    0b00000010_01010111, /// К
    0b00110001_00000100, /// Л
    0b00010010_01000001, /// М
    0b00000000_01110111, /// Н
    0b01111110_00000000, /// О
//      cat0     cat1
//    pabcdefg pabcdefg
//    |||||||| ||||||||
    0b01110010_00000000, /// П
    0b01100000_01000111, /// Р
    0b01101110_00000000, /// С
    0b01100001_00001000, /// Т
    0b00001100_01110001, /// У
    0b01100001_01001001, /// Ф
    0b00000000_01010101, /// Х
    0b10011110_00000000, /// Ц
    0b00000000_01110001, /// Ч
    0b00011110_00001000, /// Ш
    0b10011110_00001000, /// Щ
    0b01001001_00011000, /// Ъ
    0b00011110_00010111, /// Ы
    0b00001110_00010111, /// Ь
    0b01111100_01110000, /// Э
    0b00111011_00001111, /// Ю
    0b01110000_01110101, /// Я
];

immutable MartianChar[33] numbers = [
//      cat0     cat1
//    pabcdefg pabcdefg
//    |||||||| ||||||||
    0b01111110_00000000, /// 0
    0b01001101_00001000, /// 1
    0b01101100_01000100, /// 2
    0b01101100_01010000, /// 3
    0b00000000_01110001, /// 4
    0b01101100_00010001, /// 5
    0b01101100_00010111, /// 6
    0b01100000_01001000, /// 7
    0b01101100_01010101, /// 8
    0b01101100_01110001, /// 9
];
    //~ decimal = 0b10000000_00000000,
    //~ space = 0b0,
    //~ dash = 0b00000000_00100010,
